(()=>{"use strict";const t="fetchTeam",e="joinToTeam",a="fetchManager",n="checkTeamCode",r="fetchTeamMetadata",s="fetchTeamJoinFields",i="setTeam",o="setManager",l="setTeamManager",c="setTeamMetadata",m="setTeamProducers",u="setTeamJoinFields",d="/pmpr/v1/content/team",f={[r]({commit:t,state:e},a){return new Promise(((a,n)=>{null!==e.metadata?a(e.metadata):this._vm.$api.$get(`${d}/get-metadata`).then((e=>{t(c,e.data),a(e.data)})).catch((t=>{n(t)}))}))},[t]({commit:t,state:e},a){return new Promise(((n,r)=>{null!==e.team?n(e.team):this._vm.$api.$get(`${d}/get`,{params:a}).then((e=>{t(i,e.data),n(e.data)})).catch((({response:t})=>{r(t)}))}))},[a]({commit:t,state:e},a){return new Promise(((n,r)=>{null!==e.manager?n(e.manager):this._vm.$api.$get(`${d}/get-manager`,{params:a}).then((e=>{t(o,e.data),n(e.data)})).catch((({response:t})=>{r(t)}))}))},[e]({commit:t},e){return new Promise(((t,a)=>{this._vm.$api.$post(`${d}/join`,e).then((e=>{t(e.data)})).catch((({response:t})=>{a(t)}))}))},[n]({commit:t},e){return new Promise(((t,a)=>{this._vm.$api.$post(`${d}/check-code`,e).then((e=>{t(e.data)})).catch((({response:t})=>{a(t)}))}))},fetchTeamManager({commit:t},e){return new Promise(((a,n)=>{this._vm.$api.$get(`${d}/get-manager`,{params:e}).then((e=>{t(l,e.data),a(e.data)})).catch((({response:t})=>{n(t)}))}))},fetchTeamProducers({commit:t},e){return new Promise(((a,n)=>{this._vm.$api.$get(`${d}/get-producers`,{params:e}).then((e=>{t(m,e.data),a(e.data)})).catch((({response:t})=>{n(t)}))}))},[s]({commit:t},e){return new Promise(((a,n)=>{this._vm.$api.$get(`${d}/get-join-fields`,{params:e}).then((e=>{t(u,e.data),a(e.data)})).catch((({response:t})=>{n(t)}))}))}},p={[i](t,e){t.team=e},[o](t,e){t.manager=e},[c](t,e){t.metadata=e},[l](t,e){t.manager=e},[m](t,e){t.producers=e},[u](t,e){t.joinFields=e}},h={state:{team:null,manager:null,producers:null,joinFields:[],metadata:null},actions:f,mutations:p},_="fetchSingleInfo",v="setSingleInfo",b={[_]({commit:t,state:e},a){return new Promise(((n,r)=>{const{type:s,id:i}=a;void 0!==e[s][i]?n(e[s][i]):this._vm.$api.$get(`/pmpr/v1/content/single/get-${s}-info`,{params:{id:i}}).then((e=>{t(v,{type:s,id:i,info:e.data}),n(e.data)})).catch((t=>{r(t)}))}))}},g={[v](t,e){const{type:a,id:n,info:r}=e;t[a][n]=r}},P={state:{post:{},team:{},member:{}},actions:b,mutations:g},y="fetchTraffic",x="setTraffic",C={[y]({commit:t,state:e},a){return new Promise(((n,r)=>{const{period:s,type:i,id:o}=a;void 0!==e.traffic[i]&&void 0!==e.traffic[i][s]&&void 0!==e.traffic[i][s][o]?n(e.traffic[i][s][o]):this._vm.$api.$get(`/pmpr/v1/content/performance/get-${s}-traffic`,{params:{type:i,id:o}}).then((e=>{t(x,{period:s,type:i,id:o,traffic:e.data}),n(e.data)})).catch((t=>{r(t)}))}))}},w={[x](t,e){const{period:a,type:n,id:r,traffic:s}=e;void 0===t.traffic[n]&&(t.traffic[n]={}),void 0===t.traffic[n][a]&&(t.traffic[n][a]={}),t.traffic[n][a][r]=s}},$={state:{traffic:{post:{},team:{},request:{}}},actions:C,mutations:w};PRHelper.getHook().addFilter("panel_store_modules",(t=>(t["filefox-team"]=h,t["filefox-single"]=P,t["filefox-performance"]=$,t)),500);var S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.trafficChartData?a("div",[a("PanelNav",{staticClass:"mb-4",attrs:{items:t.navItems,pills:!0,active:t.view},on:{"nav-changed":function(e){return t.onNavChange(e)}}}),t._v(" "),t.chartLoading?a("PanelSpinner"):a("PanelBarChart",{attrs:{height:350,"data-labels":!1,extra:t.chartOptions,yaxis:t.trafficChartYaxis,xaxis:t.trafficChartXaxis,series:t.trafficChartSeries}})],1):a("PanelSpinner")};S._withStripped=!0;function k(t,e,a,n,r,s,i,o){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=a,c._compiled=!0),n&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),i?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=l):r&&(l=o?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var m=c.render;c.render=function(t,e){return l.call(e),m(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}const T=k({name:"PanelFileFoxPerformanceBarChart",props:{id:Number,type:String,comparative:!1},data:()=>({view:"monthly",metadata:null,chartLoading:!0,trafficChartData:null}),computed:{navItems(){return[{name:"monthly",title:this.translate("filefox.chart.monthly")},{name:"weekly",title:this.translate("filefox.chart.weekly")},{name:"daily",title:this.translate("filefox.chart.daily")}]},trafficChartSeries(){return this.comparative?this.trafficChartData?.data:[{name:this.translate(`filefox.chart.series.${this.type}`),data:this.trafficChartData?.data}]},trafficChartXaxis(){return{categories:this.trafficChartData?.labels,labels:{formatter:function(t){return PRHelper.getI18n().number(t)}}}},trafficChartYaxis(){return{title:{text:this.translate(`filefox.chart.yaxis.${this.type}`),offsetX:-10},labels:{show:!0,formatter:function(t){return PRHelper.getI18n().formatedNumber(t)}}}},chartOptions:()=>({tooltip:{y:{formatter:function(t){return PRHelper.getI18n().formatedNumber(t)}}}})},beforeMount(){this.fetchTraffic(!1)},methods:{onNavChange(t){this.view=t,this.fetchTraffic(!0)},fetchTraffic(t){return t&&(this.chartLoading=!0),this.$store.dispatch(y,{period:this.view,type:this.type,id:this.id}).then((t=>{this.trafficChartData=t})).finally((()=>{this.chartLoading=!1}))}}},S,[],!1,null,null,null).exports;var F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelDatatableRemoteList",{attrs:{columns:t.columns,clickable:!0,remote:t.remoteProps},on:{"row-clicked":t.onClickRow},scopedSlots:t._u([{key:"td",fn:function(e){var n=e.item,r=(e.column,e.column_key);e.id;return[a("PanelCellText",{attrs:{text:t.prepareCellOutput(n[r])}})]}}])})};F._withStripped=!0;const M=k({name:"PanelFileFoxPerformancePostList",props:{id:Number,type:String},computed:{remoteProps(){return{api:"/pmpr/v1/content/team/get-posts","query-params":{id:this.id,type:this.type,sort:"post_id",sortBy:"orderBy"}}},columns(){return{title:{title:this.translate("column.title"),width:"25%"},published_at:{title:this.translate("column.published_at"),width:"15%"},author:{title:this.translate("column.author"),width:"20%"},all_traffic:{title:this.translate("filefox.column.all_traffic"),width:"20%"},this_month_traffic:{title:this.translate("filefox.column.this_month_traffic"),width:"20%"}}}},methods:{onClickRow({row:t,item:e}){const a=this.$router.resolve({name:"panel_content_post",params:{id:e.id}});window.open(a.href,"_blank")},prepareCellOutput(t){return"number"==typeof t&&(t=this.formatedNumber(t)),t}}},F,[],!1,null,null,null).exports;var D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelDatatableRemoteList",{attrs:{columns:t.columns,clickable:!0,remote:t.remoteProps},on:{"row-clicked":t.onClickRow},scopedSlots:t._u([{key:"td",fn:function(e){var n=e.item,r=(e.column,e.column_key);e.id;return[a("PanelCellText",{attrs:{text:t.prepareCellOutput(n[r])}})]}}])})};D._withStripped=!0;const L=k({name:"PanelFileFoxPerformanceMemberList",props:{team:Number},computed:{remoteProps(){return{api:"/pmpr/v1/content/team/get-producers","query-params":{team:this.team,sort:"accepted_at",sortBy:"orderBy"}}},columns(){return{user:{title:this.translate("filefox.column.user"),width:"20%"},accepted_at:{title:this.translate("filefox.column.join_date"),width:"20%"},post_count:{title:this.translate("filefox.column.post_count"),width:"20%"},all_traffic:{title:this.translate("filefox.column.all_traffic"),width:"20%"},last_month_traffic:{title:this.translate("filefox.column.last_month_traffic"),width:"20%"}}}},methods:{onClickRow(t){console.log("handled",t),this.$router.push({name:"panel_content_member",params:{id:1}})},prepareCellOutput(t){return"number"==typeof t&&(t=this.formatedNumber(t)),t}}},D,[],!1,null,null,null).exports;PRHelper.getHook().addAction("panel_component_initialized",(t=>{t.component("PanelFileFoxPerformanceBarChart",T),t.component("PanelFileFoxPerformancePostList",M),t.component("PanelFileFoxPerformanceMemberList",L)}));var R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loading?a("PanelSpinner"):t.fields?a("b-row",{staticClass:"justify-content-center h-100 align-items-center"},[a("b-col",{attrs:{sm:"12",md:"8",lg:"12",xl:"8"}},[a("PanelCard",{attrs:{has_header:!1,loading:t.submitting},scopedSlots:t._u([{key:"body",fn:function(){return[a("div",{staticClass:"d-flex flex-column justify-content-center"},["check_code"===t.formState?a("PanelForm",{attrs:{fields:t.fields,labelAlign:"left",id:"check_code",data:t.data,tag:"div",offset:"4",inline:!1},on:{changed:function(e){return t.data=e}},scopedSlots:t._u([{key:"custom",fn:function(e){var n=e.field;e.props;return["message"===n.id?a("PanelNotice",{staticClass:"text-center",attrs:{icon:!1,content:n.description,type:"primary"}}):t._e()]}}],null,!1,2304994019)}):"join_team"===t.formState?a("b-row",[a("b-col",{staticClass:"mb-4 mb-md-0",attrs:{md:"6"}},[a("h3",{staticClass:"mb-4"},[t._v(t._s(t.teamData.title))]),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.teamData.description)}})]),t._v(" "),a("b-col",{attrs:{md:"6"}},[t.teamData.identifies.items?a("PanelCard",{attrs:{has_header:!1,attrs:{container:{class:"bg-gray-200 mb-4"},body:{class:"px-6 pb-3 pt-6"}}},scopedSlots:t._u([{key:"body",fn:function(){return[a("h4",[t._v(t._s(t.teamData.identifies.title))]),t._v(" "),a("ul",{staticClass:"list-group list-group-flush bg-transparent"},t._l(t.teamData.identifies.items,(function(e,n){return a("li",{key:n,staticClass:"list-group-item px-0 border-gray-500 bg-transparent"},[a("b-row",[a("b-col",{attrs:{cols:"5"}},[t._v(t._s(e.title))]),t._v(" "),a("b-col",{attrs:{cols:"7"}},[void 0!==e.value?a("strong",[t._v("\n                            "+t._s(e.value)+"\n                          ")]):a("div",{domProps:{innerHTML:t._s(e.content)}})])],1)],1)})),0)]},proxy:!0}],null,!1,1854028508)}):t._e()],1),t._v(" "),a("b-col",{attrs:{cols:"12"}},[t.teamData.activities.items?a("PanelCard",{attrs:{has_header:!1,attrs:{container:{class:"bg-gray-200"},body:{class:"px-6 pb-3 pt-6"}}},scopedSlots:t._u([{key:"body",fn:function(){return[a("h4",[t._v(t._s(t.teamData.activities.title))]),t._v(" "),a("ul",{staticClass:"list-group list-group-flush bg-transparent"},t._l(t.teamData.activities.items,(function(e,n){return a("li",{key:n,staticClass:"list-group-item px-0 border-gray-400 bg-transparent"},[a("b-row",[a("b-col",{attrs:{cols:"5"}},[t._v(t._s(e.title))]),t._v(" "),a("b-col",{attrs:{cols:"7"}},[void 0!==e.value?a("strong",[t._v("\n                            "+t._s(e.value)+"\n                          ")]):a("div",{domProps:{innerHTML:t._s(e.content)}})])],1)],1)})),0)]},proxy:!0}],null,!1,3510661565)}):t._e()],1)],1):t._e(),t._v(" "),a("PanelModalActions",{attrs:{submitActionProps:{name:"join_submit",text:t.formSubmitText},"show-cancel":"join_team"===t.formState},on:{canceled:t.onCancel,submitted:t.onSubmitForm}})],1)]},proxy:!0}])})],1)],1):t.team?a("router-view",{attrs:{team:t.team,request:t.request,role:t.role}}):t._e()};R._withStripped=!0;const N={name:"PanelContentProduction",data:()=>({data:null,team:null,role:null,fields:null,request:null,loading:!0,teamData:null,formState:"check_code",isManager:!1,submitting:!1}),beforeMount(){this.$store.dispatch(t).then((({team:t,request:e,role:a})=>{t&&e&&a&&(this.role=a,this.team=t,this.request=e,this.loading=!1)})).catch((t=>{this.$store.dispatch(s).then((t=>{this.fields=t.data,this.loading=!1})).catch((()=>{}))}))},computed:{formSubmitText(){let t="";return t="check_code"===this.formState?this.translate("filefox.action.check_code"):this.translate("filefox.action.join_team"),t}},methods:{onCancel(){this.formState="check_code"},onSubmitForm(){this.submitting=!0,"check_code"===this.formState?this.$helper.$runAction(n,this.data).then((({response:t,modal:e})=>{this.teamData=t,this.formState="join_team"})).finally((()=>this.submitting=!1)):"join_team"===this.formState&&this.$helper.$runAction(e,this.data).then((({response:t,modal:e})=>{e.then((()=>{PRHelper.getTool().reload()}))}))}}};const j=k(N,R,[],!1,null,null,null).exports;var q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loading?a("PanelSpinner"):a("div",[a("PanelCard",{staticClass:"mb-5",attrs:{has_header:!1},scopedSlots:t._u([{key:"body",fn:function(){return[a("h1",{staticClass:"mb-6"},[t._v(t._s(t.info.title))]),t._v(" "),a("b-row",[a("b-col",{attrs:{md:"12",lg:"3"}},[a("img",{staticClass:"img-fluid rounded w-100",attrs:{src:t.info.thumbnail,alt:"Post feature Image"}})]),t._v(" "),a("b-col",{attrs:{md:"12",lg:"6"}},[a("div",{staticClass:"mb-5",domProps:{innerHTML:t._s(t.info.excerpt)}})]),t._v(" "),a("b-col",{staticClass:"d-flex flex-column",attrs:{md:"12",lg:"3"}},t._l(t.info.actions,(function(t,e){return a("PanelAction",{key:e,staticClass:"mb-4",attrs:{text:t.title,light:"",variant:"edit"===t.name?"primary":"success",href:t.link,"as-action":"",size:"lg",icon:t.icon}})})),1)],1)]},proxy:!0}],null,!1,138253394)}),t._v(" "),a("b-row",[a("b-col",{attrs:{md:"8"}},[a("PanelCard",{attrs:{has_header:!1},scopedSlots:t._u([{key:"body",fn:function(){return[a("PanelFileFoxPerformanceBarChart",{attrs:{id:t.info.post_id,type:"post"}})]},proxy:!0}],null,!1,4130893025)})],1)],1)],1)};q._withStripped=!0;const E=k({name:"PanelContentPost",data:()=>({info:null,loading:!0}),props:{id:Number},beforeMount(){const t=this.$route.params.id;this.$store.dispatch(_,{id:t,type:"post"}).then((t=>{this.info=t,this.loading=!1})).catch((()=>{}))}},q,[],!1,null,null,null).exports;var I=function(){var t=this.$createElement;return(this._self._c||t)("span")};I._withStripped=!0;const H=k({name:"PanelContentTeam"},I,[],!1,null,null,null).exports;var B=function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",[t._v("member")])};B._withStripped=!0;const O=k({name:"PanelContentMember"},B,[],!1,null,null,null).exports;var A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PanelSidebar",{attrs:{tabs:t.tabs,args:{team:t.team,role:t.role,request:t.request}},scopedSlots:t._u([{key:"before_tabs",fn:function(){return[t.loading?a("PanelSpinner"):a("div",{staticClass:"mb-5"},[a("PanelAvatar",{staticClass:"mb-5",attrs:{text:t.manager.team,image:t.manager.avatar,subtext:t.manager.name}}),t._v(" "),t._l(t.manager.metadata,(function(e,n){return"content_manager"===t.role?a("div",{key:n,staticClass:"rounded p-3 bg-primary text-white text-center d-flex flex-column"},[a("span",{staticClass:"mb-2 font-md"},[t._v(t._s(e.title))]),t._v(" "),a("strong",{staticClass:"fs-lg fk-none font-garamond"},[t._v(t._s(e.value))])]):t._e()}))],2)]},proxy:!0}])})};A._withStripped=!0;const X=k({name:"PanelContentPerformance",props:{role:null,team:null,request:null},data:()=>({manager:null,loading:!0}),beforeMount(){this.$store.dispatch(a).then((t=>{this.manager=t,this.loading=!1})).catch((t=>{}))},computed:{tabs(){return this.$router.getRouteChildren("panel_content_performance")}}},A,[],!1,null,null,null).exports;var z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.team?a("PanelCard",{scopedSlots:t._u([{key:"body",fn:function(){return["content_manager"===t.role?a("div",[t.metadata?a("PanelCard",{staticClass:"bg-gray-200 mb-8",attrs:{has_header:!1},scopedSlots:t._u([{key:"body",fn:function(){return[a("b-row",[a("b-col",{staticClass:"mb-4 mb-lg-0",attrs:{md:"12",xl:"7"}},[a("ul",{staticClass:"list-group list-group-flush bg-transparent my-auto list-group-simple"},t._l(t.metadata.items,(function(e,n){return a("li",{key:n,staticClass:"list-group-item px-0 border-gray-400 py-3 d-flex justify-content-between bg-transparent"},[a("span",{staticClass:"my-auto"},[t._v(t._s(e.title))]),t._v(" "),a("strong",{staticClass:"fk-none fs-3"},[t._v(t._s(t.formatedNumber(e.value)))])])})),0)]),t._v(" "),a("b-col",{attrs:{md:"12",xl:"5"}},[a("PanelCard",{staticClass:"bg-primary text-white",attrs:{has_header:!1,attrs:{body:{class:"p-3"}}},scopedSlots:t._u([{key:"body",fn:function(){return[a("div",{staticClass:"d-flex flex-column text-center my-auto"},[a("span",[t._v(t._s(t.metadata.result.suffix_text))]),t._v(" "),a("strong",{staticClass:"my-2 fs-xxl fk-none"},[t._v(t._s(t.percentage(t.formatedNumber(t.metadata.result.text))))]),t._v(" "),a("span",[t._v(t._s(t.metadata.result.postfix_text))])])]},proxy:!0}],null,!1,216201946)})],1)],1)]},proxy:!0}],null,!1,4009216340)}):t._e(),t._v(" "),a("PanelFileFoxPerformanceBarChart",{attrs:{type:"team",id:t.team}})],1):a("div",[a("PanelTab",{attrs:{items:t.tabItems},scopedSlots:t._u([{key:"content",fn:function(e){return["overview"===e.item.name?a("PanelFileFoxPerformanceBarChart",{attrs:{type:"request",id:t.request}}):a("PanelFileFoxPerformancePostList",{attrs:{type:"request",id:t.request}})]}}],null,!1,4045407778)})],1)]},proxy:!0}],null,!1,678825061)}):t._e()};z._withStripped=!0;const J=k({name:"PanelContentPerformanceMe",props:{role:null,team:null,request:null},data:()=>({view:"monthly",loading:!0,metadata:null,chartLoading:!0,trafficChartData:null}),beforeMount(){this.$store.dispatch(r).then((t=>{this.metadata=t}))},computed:{tabItems(){return[{name:"overview",title:this.translate("filefox.tab.overview")},{name:"pages_traffic",title:this.translate("filefox.tab.pages_traffic")}]}},methods:{}},z,[],!1,null,null,null).exports;var U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.team?a("PanelCard",{scopedSlots:t._u([{key:"body",fn:function(){return[a("PanelTab",{attrs:{items:t.tabItems},scopedSlots:t._u([{key:"content",fn:function(e){var n=e.item;return["overview"===n.name?a("PanelFileFoxPerformanceBarChart",{attrs:{type:"team_performance",id:t.team,comparative:!0}}):"posts"===n.name?a("PanelFileFoxPerformancePostList",{attrs:{type:"team",id:t.team}}):"producers"===n.name?a("PanelFileFoxPerformanceMemberList",{attrs:{team:t.team}}):t._e()]}}],null,!1,2932328505)})]},proxy:!0}],null,!1,884886997)}):t._e()};U._withStripped=!0;const V=k({name:"PanelContentPerformanceTeam",props:{team:null},methods:{prepareCellOutput(t){return"number"==typeof t&&(t=this.formatedNumber(t)),t}},computed:{tabItems(){return[{name:"overview",title:this.translate("filefox.tab.overview")},{name:"producers",title:this.translate("filefox.tab.users_performance")},{name:"posts",title:this.translate("filefox.tab.posts_traffic")}]}}},U,[],!1,null,null,null).exports;var Y=function(){var t=this.$createElement;return(this._self._c||t)("router-view")};Y._withStripped=!0;const G=k({name:"PanelContentManagement"},Y,[],!1,null,null,null).exports;window.PanelContent=j,window.PanelContentPost=E,window.PanelContentTeam=H,window.PanelContentMember=O,window.PanelContentPerformance=X,window.PanelContentPerformanceMe=J,window.PanelContentPerformanceTeam=V,window.PanelContentManagement=G})();