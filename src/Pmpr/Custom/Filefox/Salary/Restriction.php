<?php
/*   _______________________________________
    |  Obfuscated by PMPR - Php Obfuscator  |
    |             688b675439c02             |
    |_______________________________________|
*/
 namespace Pmpr\Custom\Filefox\Salary; use Pmpr\Common\Foundation\Interfaces\Constants; use Pmpr\Custom\Filefox\Container; use Pmpr\Custom\Filefox\Salary\Model\PostOwner; use Pmpr\Custom\Filefox\Salary\Model\Team; use Pmpr\Module\Salary\Model\Request; use WP_Query; use WP_Term_Query; class Restriction extends Container { public function wigskegsqequoeks() { $this->qcsmikeggeemccuu('init', [$this, 'init'])->qcsmikeggeemccuu('admin_init', [$this, 'yeyiguyegmmyusea']); $this->qcsmikeggeemccuu('deleted_post', [$this, 'ukqieeemykgisiic'])->qcsmikeggeemccuu('save_post', [$this, 'seoeawgkwacqcqak'])->qcsmikeggeemccuu('add_attachment', [$this, 'seoeawgkwacqcqak']); $this->qcsmikeggeemccuu(Process::iuqesigcoummmkws, [$this, 'wsccmcugkouoksaa'])->qcsmikeggeemccuu(Process::okcwwauugmiisyua, [$this, 'icqoewumqkwiqiym']); $this->qcsmikeggeemccuu('pre_get_terms', [$this, 'csgqkqmgwmygiagu'], 10, 2); $this->qcsmikeggeemccuu('admin_menu', [$this, 'mqmquuiyckkauqsw'], 999); } public function kgquecmsgcouyaya() { $this->cecaguuoecmccuse('posts_join', [$this, 'gqkuqskwyqkkaaee'], 10, 2)->cecaguuoecmccuse('posts_where', [$this, 'ckmoiomomseqqsqw'], 10, 2)->cecaguuoecmccuse('posts_groupby', [$this, 'caockaywiaewgism'], 10, 2)->cecaguuoecmccuse('get_usernumposts', [$this, 'egcwyewqymkimkkm'], 10, 4)->cecaguuoecmccuse('user_has_cap', [$this, 'mgssoogcyueumogu'], 10, 3); $this->aqaqisyssqeomwom('pr_user_roles_priority', [$this, 'askeyuaeoqooesgm'], 999); } public function askeyuaeoqooesgm($uagwmwoawiwkycao) { $uagwmwoawiwkycao[Salary::icygkcucieasceuk] = 10; $uagwmwoawiwkycao[Salary::emceseoyeswkikuu] = 20; return $uagwmwoawiwkycao; } public function init() { $this->wosimcsaucumweem(); Process::symcgieuakksimmu()->ccsskqckeuaeuiek(); } public function yeyiguyegmmyusea() { $sciomagaqmgggsiu = $this->caokeucsksukesyo()->gscioiumssogceuc()->ciugwooasaqcywas(); foreach ($sciomagaqmgggsiu as $useksmwkuswkwcqg) { $this->cecaguuoecmccuse("views_edit-{$useksmwkuswkwcqg}", [$this, 'aaqmcioomosoqqou']); } global $pagenow; if ($pagenow === 'edit-tags.php') { $kesssewsiegssiya = $this->caokeucsksukesyo()->giiecckwoyiawoyy()->gkwaaeusmsaywikg(Constants::gmmygyiecgmggaam, ''); if ($kesssewsiegssiya === Constants::oeeqisiiqoswqqmy && !$this->uwkmaywceaaaigwo()->issssuygyewuaswa()->scmcyesmmikkucie(Constants::gewmeskawiqikkoc)) { $this->caokeucsksukesyo()->euekiyuksecoccus()->die(__('You do not have the required permissions to perform this action.', PR__CST__FILEFOX)); } } } public function mqmquuiyckkauqsw() { $ewgmommeawggyaek = $this->uwkmaywceaaaigwo()->issssuygyewuaswa(); $ycoeoaakqyskgykq = $ewgmommeawggyaek->qyeguewwsmosqcwc(); if (!$ewgmommeawggyaek->yciaosuiyeieceug($ycoeoaakqyskgykq, Constants::gewmeskawiqikkoc)) { $ewsqcacamuomwagw = $this->uwkmaywceaaaigwo()->ogciwyoqgciosgcw(); $sciomagaqmgggsiu = [Constants::oguseymmyyoyaako, Constants::sususqikkuaoqeco]; foreach ($sciomagaqmgggsiu as $useksmwkuswkwcqg) { $gcquyecwuesyqgqm = 'edit-tags.php?taxonomy=material&post_type=' . $useksmwkuswkwcqg; $ewsqcacamuomwagw->gskomckeekemaake('edit.php?post_type=' . $useksmwkuswkwcqg, esc_attr($gcquyecwuesyqgqm)); $ewsqcacamuomwagw->gskomckeekemaake('edit.php?post_type=' . $useksmwkuswkwcqg, $gcquyecwuesyqgqm); } } } public function csgqkqmgwmygiagu($gqgemcmoicmgaqie) { if (!empty($gqgemcmoicmgaqie->query_vars[Constants::qioguuqkouiccqig])) { return; } $seyqqsmuaiegkeeq = $gqgemcmoicmgaqie->query_vars[Constants::gmmygyiecgmggaam] ?? []; if (empty($seyqqsmuaiegkeeq)) { return; } $kesssewsiegssiya = $seyqqsmuaiegkeeq[array_key_first($seyqqsmuaiegkeeq)]; if (!in_array($kesssewsiegssiya, [Constants::oeeqisiiqoswqqmy, Constants::qgciomgukmcwscqw, Constants::cmckeoksigiaqykc])) { return; } $ycoeoaakqyskgykq = $this->uwkmaywceaaaigwo()->issssuygyewuaswa()->qyeguewwsmosqcwc(); if (!$this->caokeucsksukesyo()->issssuygyewuaswa()->askmkgcmgekiqwsg(Salary::icygkcucieasceuk, $ycoeoaakqyskgykq, true)) { return; } if (!$gqgemcmoicmgaqie instanceof WP_Term_Query) { return; } $iseoqmmuokyweokw = Team::symcgieuakksimmu()->awouqscoqmqkcgus([Constants::meksegaoamowuwoq => $ycoeoaakqyskgykq, Constants::aisguagukaewucii => Constants::oeeqisiiqoswqqmy]); if (empty($iseoqmmuokyweokw)) { $gqgemcmoicmgaqie->query_vars['term_taxonomy_id'] = -1; } if ($kesssewsiegssiya === Constants::oeeqisiiqoswqqmy) { $gqgemcmoicmgaqie->query_vars[Constants::ackcaikowcokggsc] = $iseoqmmuokyweokw; } else { $oyiyuuoguwwaksaa = [Constants::ygyiacciqgemekwc => Constants::ieiyckasqmcyekim]; foreach ($iseoqmmuokyweokw as $uycaaqiuaswwyamg) { $oyiyuuoguwwaksaa[] = [Constants::ascagqcquwgmygkm => Constants::oeeqisiiqoswqqmy, Constants::ciyoccqkiamemcmm => '"' . $uycaaqiuaswwyamg . '"', Constants::ykemsyouoqyoaysg => Constants::augocsiaqqukkuui, Constants::ygyiacciqgemekwc => Constants::ieiyckasqmcyekim]; $oyiyuuoguwwaksaa[] = [Constants::ascagqcquwgmygkm => Constants::oeeqisiiqoswqqmy, Constants::ciyoccqkiamemcmm => $uycaaqiuaswwyamg, Constants::ykemsyouoqyoaysg => '=', Constants::ygyiacciqgemekwc => Constants::ieiyckasqmcyekim]; } $gqgemcmoicmgaqie->query_vars[Constants::cuoyscoiacswuauq] = $oyiyuuoguwwaksaa; } } public function egcwyewqymkimkkm($gaeqamemwmwsyukm, $ycoeoaakqyskgykq, $useksmwkuswkwcqg, $acuaaumqecywosgs = true) { if ($acuaaumqecywosgs) { $igaagwuyasawwqms = Constants::wmmucsiyiyusmssm; } else { $igaagwuyasawwqms = Salary::susokqyqcmqomwqk; } $moyaaaascoeowegu = $this->ywwmsmgqqiyqeaaq($igaagwuyasawwqms, $useksmwkuswkwcqg, $ycoeoaakqyskgykq); if ($moyaaaascoeowegu > 0) { $gaeqamemwmwsyukm = $moyaaaascoeowegu; } return $gaeqamemwmwsyukm; } public function aaqmcioomosoqqou($umwgoasiowmqcumw) { $ewgmommeawggyaek = $this->uwkmaywceaaaigwo()->issssuygyewuaswa(); if (!$ewgmommeawggyaek->scmcyesmmikkucie(Constants::gewmeskawiqikkoc)) { $seumokooiykcomco = $this->caokeucsksukesyo()->ayueggmoqeeukqmq(); $ycoeoaakqyskgykq = $ewgmommeawggyaek->qyeguewwsmosqcwc(); $useksmwkuswkwcqg = $seumokooiykcomco->gueasuouwqysmomu(); foreach ($umwgoasiowmqcumw as $qqomumygoacsmsie => $iwywmkygwewiamwm) { switch ($qqomumygoacsmsie) { case Constants::ALL: $gaeqamemwmwsyukm = $this->ywwmsmgqqiyqeaaq(Constants::uouymeyqasaeckso, $useksmwkuswkwcqg, $ycoeoaakqyskgykq); break; case Constants::gegwisswscyuqmyk: $gaeqamemwmwsyukm = $this->ywwmsmgqqiyqeaaq(Constants::meksegaoamowuwoq, $useksmwkuswkwcqg, $ycoeoaakqyskgykq); break; default: $gaeqamemwmwsyukm = $this->ywwmsmgqqiyqeaaq($qqomumygoacsmsie, $useksmwkuswkwcqg, $ycoeoaakqyskgykq); break; } if ($gaeqamemwmwsyukm > 0) { $umwgoasiowmqcumw[$qqomumygoacsmsie] = preg_replace('/\\(\\d+\\)/', '(' . $gaeqamemwmwsyukm . ')', $iwywmkygwewiamwm); } else { unset($umwgoasiowmqcumw[$qqomumygoacsmsie]); } } } return $umwgoasiowmqcumw; } public function ywwmsmgqqiyqeaaq($igaagwuyasawwqms, $useksmwkuswkwcqg, $ycoeoaakqyskgykq = 0) : int { $ciegwwqiocgiaiua = $this->uwkmaywceaaaigwo()->kumkwyksmeikauow(); $ywmkwiwkosakssii = [Constants::ymckmcsiymwqucoq => Constants::oyaoekcogwkcekcc, Constants::uouymeyqasaeckso => $useksmwkuswkwcqg]; $ckwyieiysyweuqqk = $ciegwwqiocgiaiua->ceiuuimmuqieoysu(Constants::qgmuskygocwmouos); $wgkogsmkwskskgsw = Team::symcgieuakksimmu()->coyaqyocmqmmgeew($ycoeoaakqyskgykq, Constants::gouqcwikiiygyasc); $gmaiaqwcciqqckii = $useksmwkuswkwcqg; if (is_array($gmaiaqwcciqqckii)) { $gmaiaqwcciqqckii = implode(',', $useksmwkuswkwcqg); } switch ($igaagwuyasawwqms) { case Salary::susokqyqcmqomwqk: $sewwikwiigsgqiaq = "team_posts_count:{$wgkogsmkwskskgsw}:{$gmaiaqwcciqqckii}:{$ckwyieiysyweuqqk}"; $ywmkwiwkosakssii[Salary::mwisuqgywiccyykw] = $wgkogsmkwskskgsw; $ywmkwiwkosakssii[Constants::gikuasuikwemyqoq] = Constants::scsqckmsqgmscsqc; break; case Constants::meksegaoamowuwoq: $sewwikwiigsgqiaq = "user_posts_count:{$ycoeoaakqyskgykq}:{$gmaiaqwcciqqckii}:{$ckwyieiysyweuqqk}"; $ywmkwiwkosakssii[Constants::iwascisiiokuackw] = $ycoeoaakqyskgykq; $ywmkwiwkosakssii[Constants::gikuasuikwemyqoq] = Constants::scsqckmsqgmscsqc; break; default: $sewwikwiigsgqiaq = "team_posts_count:{$wgkogsmkwskskgsw}:{$gmaiaqwcciqqckii}:{$igaagwuyasawwqms}:{$ckwyieiysyweuqqk}"; $ywmkwiwkosakssii[Salary::mwisuqgywiccyykw] = $wgkogsmkwskskgsw; $ywmkwiwkosakssii[Constants::gikuasuikwemyqoq] = $igaagwuyasawwqms; break; } $gaeqamemwmwsyukm = $ciegwwqiocgiaiua->get($sewwikwiigsgqiaq, 'post-queries', false, $yumccasyisqwmmio); if (empty($gaeqamemwmwsyukm) && !$yumccasyisqwmmio) { $gqgemcmoicmgaqie = $this->caokeucsksukesyo()->ayueggmoqeeukqmq()->owicscwgeuqcqaig($useksmwkuswkwcqg, $ywmkwiwkosakssii); $gaeqamemwmwsyukm = $gqgemcmoicmgaqie->found_posts; $ciegwwqiocgiaiua->set($sewwikwiigsgqiaq, $gaeqamemwmwsyukm, 'post-queries'); } return $gaeqamemwmwsyukm; } public function gqkuqskwyqkkaaee($eagqsqeocaokmsim, $gqgemcmoicmgaqie) { if ($this->gmsmqaoagciuigss($gqgemcmoicmgaqie)) { global $wpdb; $csqimeewkmuqaaag = PostOwner::symcgieuakksimmu()->cokoiaeeomgssqgy(); $eagqsqeocaokmsim .= " LEFT JOIN {$wpdb->prefix}{$csqimeewkmuqaaag} po ON po.post_id = {$wpdb->posts}.ID"; } return $eagqsqeocaokmsim; } public function ckmoiomomseqqsqw($icsywsyukqcciiky, $gqgemcmoicmgaqie) { if ($this->gmsmqaoagciuigss($gqgemcmoicmgaqie)) { $eqwoegegiamegqsm = $this->caokeucsksukesyo()->skckwsgymkimyuwo(); $wgkogsmkwskskgsw = $eqwoegegiamegqsm->get(Salary::mwisuqgywiccyykw, 0, $gqgemcmoicmgaqie); $qaqgaqikqmcmukem = $eqwoegegiamegqsm->get(Constants::iwascisiiokuackw, 0, $gqgemcmoicmgaqie); if (empty($qaqgaqikqmcmukem) && empty($wgkogsmkwskskgsw) && !$this->caokeucsksukesyo()->owicscwgeuqcqaig()->syukqeyowauuucwi()) { $qaqgaqikqmcmukem = $this->uwkmaywceaaaigwo()->issssuygyewuaswa()->qyeguewwsmosqcwc(); } if (empty($wgkogsmkwskskgsw) && $qaqgaqikqmcmukem) { $wgkogsmkwskskgsw = Team::symcgieuakksimmu()->coyaqyocmqmmgeew($qaqgaqikqmcmukem, Constants::gouqcwikiiygyasc); } global $wpdb; if ($wgkogsmkwskskgsw) { if ($qaqgaqikqmcmukem) { $icsywsyukqcciiky .= " AND ({$wpdb->posts}.post_author = {$qaqgaqikqmcmukem} OR po.team_id = {$wgkogsmkwskskgsw})"; } else { $icsywsyukqcciiky .= " AND po.team_id = {$wgkogsmkwskskgsw}"; } } else { if ($qaqgaqikqmcmukem) { $icsywsyukqcciiky .= " AND {$wpdb->posts}.post_author = {$qaqgaqikqmcmukem}"; } } } return $icsywsyukqcciiky; } public function caockaywiaewgism($ewukwikemcawscwe, $gqgemcmoicmgaqie) { if ($this->gmsmqaoagciuigss($gqgemcmoicmgaqie)) { global $wpdb; $ewukwikemcawscwe = "{$wpdb->posts}.ID"; } return $ewukwikemcawscwe; } public function icqoewumqkwiqiym() { Process::symcgieuakksimmu()->uamuwgiguyaysyem(1); } public function wosimcsaucumweem() { $this->caokeucsksukesyo()->ekkwaykokcgqkmoi()->oeowmqwauagmkkwu('ff_roles_reloaded', 1, function () { $qqwqimmwoowakisk = ['read' => true, 'read_post' => true, 'read_posts' => true, 'upload_files' => true, 'edit_terms' => false, 'delete_terms' => false, 'edit_pages' => false, 'publish_pages' => false, 'edit_others_pages' => false, 'moderate_comments' => true, 'edit_comment' => true, 'delete_comment' => true, 'approve_comment' => true, 'moderate_product_comments' => true, 'delete_product_comments' => true, 'edit_product_comments' => true, 'edit_post' => true, 'edit_news' => true, 'edit_posts' => true, 'edit_articles' => true, 'edit_products' => true, 'edit_published_post' => true, 'edit_published_news' => true, 'edit_published_posts' => true, 'edit_published_articles' => true, 'edit_published_products' => true, 'edit_others_news' => false, 'delete_others_news' => false, 'delete_others_posts' => false, 'edit_others_articles' => false, 'delete_others_articles' => false, 'edit_others_products' => false, 'delete_others_products' => false]; $cymcyywycwkawmsi = [Salary::emceseoyeswkikuu => [Constants::qescuiwgsyuikume => __('Content Producer', PR__CST__FILEFOX), Constants::cecmeqwgqawkeieq => Constants::iwascisiiokuackw, Constants::mayesweykoooyugy => ['delete_post' => false, 'delete_posts' => false, 'publish_posts' => false, 'delete_published_posts' => false, 'delete_articles' => false, 'publish_articles' => false, 'delete_published_articles' => false, 'delete_news' => false, 'publish_news' => false, 'delete_published_news' => false, 'delete_products' => false, 'publish_products' => false, 'delete_published_products' => false]], Salary::icygkcucieasceuk => [Constants::qescuiwgsyuikume => __('Content Manager', PR__CST__FILEFOX), Constants::cecmeqwgqawkeieq => Constants::yaiacqocwcgmooio, Constants::mayesweykoooyugy => ['delete_post' => true, 'delete_posts' => true, 'publish_posts' => true, 'edit_others_posts' => true, 'delete_published_posts' => true, 'delete_articles' => true, 'publish_articles' => true, 'delete_published_articles' => true, 'delete_news' => true, 'publish_news' => true, 'delete_published_news' => true, 'delete_products' => true, 'publish_products' => true, 'delete_published_products' => true]]]; $ewgmommeawggyaek = $this->uwkmaywceaaaigwo()->issssuygyewuaswa(); foreach ($cymcyywycwkawmsi as $uysmeyukoeyyqamq => $uiewakwqscemywuo) { $ewgmommeawggyaek->gcegsuoqiicquosg($uysmeyukoeyyqamq); if (!$ewgmommeawggyaek->aqciiewawiwecoou($uysmeyukoeyyqamq)) { $sksmomeiauyqaomi = []; $quoueucciwmgygye = $uiewakwqscemywuo[Constants::cecmeqwgqawkeieq] ?? 0; if ($quoueucciwmgygye) { $sksmomeiauyqaomi = $ewgmommeawggyaek->aqciiewawiwecoou($uiewakwqscemywuo[Constants::cecmeqwgqawkeieq])->capabilities; } $gyskaqycyaywiiyi = $this->caokeucsksukesyo()->gyecsegqciqykomu()->ckscqqquyskscaaw($uiewakwqscemywuo[Constants::mayesweykoooyugy] ?? [], $qqwqimmwoowakisk); if ($gyskaqycyaywiiyi) { foreach ($gyskaqycyaywiiyi as $ymqmyyeuycgmigyo => $gkswkiicccswksiq) { $sksmomeiauyqaomi[$ymqmyyeuycgmigyo] = $gkswkiicccswksiq; } } $ewgmommeawggyaek->secqmksoyausymio($uysmeyukoeyyqamq, $uiewakwqscemywuo[Constants::qescuiwgsyuikume], $sksmomeiauyqaomi); } } }); } public function mgssoogcyueumogu($smiuugcoukoiceoq, $smgioooysaacyigy, $ywmkwiwkosakssii) { $ewgmommeawggyaek = $this->uwkmaywceaaaigwo()->issssuygyewuaswa(); $eogowigeyucaauig = $ywmkwiwkosakssii[0] ?? ''; if (empty($eogowigeyucaauig)) { return $smiuugcoukoiceoq; } $ycoeoaakqyskgykq = $ewgmommeawggyaek->qyeguewwsmosqcwc(); $yoiguusocukqeayg = $this->caokeucsksukesyo()->issssuygyewuaswa(); $goecwaaykqoaaagg = $yoiguusocukqeayg->askmkgcmgekiqwsg(Constants::wiukckegkqeumqug, $ycoeoaakqyskgykq, true) || $yoiguusocukqeayg->askmkgcmgekiqwsg(Constants::zmmsyimwiiaweocw, $ycoeoaakqyskgykq, true); if ($goecwaaykqoaaagg) { return $smiuugcoukoiceoq; } $emwagqamysmyeigc = $yoiguusocukqeayg->askmkgcmgekiqwsg(Salary::icygkcucieasceuk, $ycoeoaakqyskgykq, true); $mgawqagyqukmasom = $yoiguusocukqeayg->askmkgcmgekiqwsg(Salary::emceseoyeswkikuu, $ycoeoaakqyskgykq, true); if (!$emwagqamysmyeigc && !$mgawqagyqukmasom) { return $smiuugcoukoiceoq; } $uagwmwoawiwkycao = $yoiguusocukqeayg->yksywgmucwascgwk($ycoeoaakqyskgykq); if (count($uagwmwoawiwkycao) > 1) { foreach ($smgioooysaacyigy as $gkswkiicccswksiq) { if (empty($smiuugcoukoiceoq[$gkswkiicccswksiq])) { continue; } foreach ($uagwmwoawiwkycao as $oeucsuyqysaciasy) { $ccsucagoagkeoiyy = $ewgmommeawggyaek->aqciiewawiwecoou($oeucsuyqysaciasy); if ($ccsucagoagkeoiyy && !empty($ccsucagoagkeoiyy->capabilities[$gkswkiicccswksiq])) { $smiuugcoukoiceoq[$gkswkiicccswksiq] = true; break; } } } } if (isset($ywmkwiwkosakssii[2])) { if (in_array($eogowigeyucaauig, ['edit_term', 'delete_term'])) { $ucicuwcaawugkseg = $ywmkwiwkosakssii[2]; $gwykaiwqgaycyggs = false; $aoskwucuugeuaeus = $this->caokeucsksukesyo()->kckogqkiycqeumoa(); if ($iwewcwusemqaiggk = $aoskwucuugeuaeus->get($ucicuwcaawugkseg)) { $kesssewsiegssiya = $aoskwucuugeuaeus->yyoeeseewqmmyaee($iwewcwusemqaiggk); if (in_array($kesssewsiegssiya, [Constants::qgciomgukmcwscqw, Constants::cmckeoksigiaqykc])) { $aqykuigiuwmmcieu = Team::symcgieuakksimmu()->awouqscoqmqkcgus([Constants::meksegaoamowuwoq => $ycoeoaakqyskgykq, Constants::aisguagukaewucii => $kesssewsiegssiya]); if ($aqykuigiuwmmcieu) { $iaceomqgwiocqwee = $this->caokeucsksukesyo()->ywqgcuymeiswqyqc()->kaucoswaceqcuyam($aqykuigiuwmmcieu, false); if (in_array($ucicuwcaawugkseg, $iaceomqgwiocqwee)) { $gwykaiwqgaycyggs = true; } else { $uuigsgkesyckeoqa = $aoskwucuugeuaeus->owaokmsayecmasqu($ucicuwcaawugkseg); if (in_array($uuigsgkesyckeoqa, $iaceomqgwiocqwee)) { $gwykaiwqgaycyggs = true; } } } } if ($gwykaiwqgaycyggs) { switch ($eogowigeyucaauig) { case 'delete_term': $omwmuycmeqcqokom = $aoskwucuugeuaeus->ygqycmmkoiuocoia($iwewcwusemqaiggk); $gwykaiwqgaycyggs = !empty($omwmuycmeqcqokom) && $iwewcwusemqaiggk->count <= 0; break; } } } $smiuugcoukoiceoq = $this->iouegoukugiiaeoo($smiuugcoukoiceoq, $eogowigeyucaauig, $smgioooysaacyigy, $gwykaiwqgaycyggs); } if (in_array($eogowigeyucaauig, ['edit_post', 'delete_post', 'read_post'], true)) { $gcqseksiskwueksc = $ywmkwiwkosakssii[2]; $seumokooiykcomco = $this->caokeucsksukesyo()->ayueggmoqeeukqmq(); if ($post = $seumokooiykcomco->get($gcqseksiskwueksc, Constants::ckmqoekmugkggeym, true)) { $eqwoegegiamegqsm = $this->caokeucsksukesyo()->skckwsgymkimyuwo(); switch ($eogowigeyucaauig) { case 'read_post': $wgkogsmkwskskgsw = Team::symcgieuakksimmu()->coyaqyocmqmmgeew($ycoeoaakqyskgykq, Constants::gouqcwikiiygyasc); if ($wgkogsmkwskskgsw > 0) { $gqgemcmoicmgaqie = $eqwoegegiamegqsm->gwumowwouoisykio([Constants::kqigmeickowqiiyy => $gcqseksiskwueksc, Salary::mwisuqgywiccyykw => $wgkogsmkwskskgsw]); if (PostOwner::symcgieuakksimmu()->iekyeyicoyyawomk()->exists($gqgemcmoicmgaqie)) { $smiuugcoukoiceoq = $this->iouegoukugiiaeoo($smiuugcoukoiceoq, $eogowigeyucaauig, $smgioooysaacyigy, true); } } break; case 'delete_post': case 'edit_post': $wskkqqkmwecoqqse = $eogowigeyucaauig === 'delete_post'; $eiicaiwgqkgsekce = $this->caokeucsksukesyo()->giiecckwoyiawoyy(); if ($wskkqqkmwecoqqse && $seumokooiykcomco->csyuekyssywqayoa($post) && $gcqseksiskwueksc === (int) $eiicaiwgqkgsekce->yyqgamuwwakgciey(Constants::mswoacegomcucaik) && Constants::DELETE === $eiicaiwgqkgsekce->yyqgamuwwakgciey(Constants::uqgcmmosieyimiku)) { $smiuugcoukoiceoq = $this->iouegoukugiiaeoo($smiuugcoukoiceoq, $eogowigeyucaauig, $smgioooysaacyigy, false); } else { $aqmwamyiwgeeymqa = null; if ($yoiguusocukqeayg->askmkgcmgekiqwsg(Salary::icygkcucieasceuk, $ycoeoaakqyskgykq)) { $aqmwamyiwgeeymqa = Request::symcgieuakksimmu()->mqosioycmusugmke($ycoeoaakqyskgykq, [$eqwoegegiamegqsm->megqywqeuquawkim(Salary::mwisuqgywiccyykw)->wegeyaguowmkqiac()]); } if (!$wskkqqkmwecoqqse && empty($aqmwamyiwgeeymqa)) { $aqmwamyiwgeeymqa = Request::symcgieuakksimmu()->mqosioycmusugmke($ycoeoaakqyskgykq, [$eqwoegegiamegqsm->megqywqeuquawkim(Salary::mwisuqgywiccyykw)->amwwousckkqyweok()]); } if ($aqmwamyiwgeeymqa) { $yeegouakwmmqgekk = (int) $seumokooiykcomco->mguqscccckuywsya($post) === $ycoeoaakqyskgykq || PostOwner::symcgieuakksimmu()->aiwkayseywyckasm($post, $aqmwamyiwgeeymqa); $smiuugcoukoiceoq = $this->iouegoukugiiaeoo($smiuugcoukoiceoq, $eogowigeyucaauig, $smgioooysaacyigy, $yeegouakwmmqgekk); } } break; } } } } return $smiuugcoukoiceoq; } private function iouegoukugiiaeoo(array $smiuugcoukoiceoq, string $eogowigeyucaauig, array $eeieuuugeeggakkw, bool $yeegouakwmmqgekk) : array { $eyqkocgiyswksyuy = [Constants::gewmeskawiqikkoc]; $smiuugcoukoiceoq[$eogowigeyucaauig] = $yeegouakwmmqgekk; foreach ($eeieuuugeeggakkw as $gkswkiicccswksiq) { if (in_array($gkswkiicccswksiq, $eyqkocgiyswksyuy, true)) { continue; } $smiuugcoukoiceoq[$gkswkiicccswksiq] = $yeegouakwmmqgekk; } return $smiuugcoukoiceoq; } public function wsccmcugkouoksaa($suaemuyiacqyugsm) { $oquqsamoqkequssa = PostOwner::symcgieuakksimmu(); $ceiwsaacewygcsqg = $oquqsamoqkequssa->kumuygiiqswoyasy(); $eqwoegegiamegqsm = $this->caokeucsksukesyo()->skckwsgymkimyuwo(); $gqgemcmoicmgaqie = $eqwoegegiamegqsm->kyckwuuiqwmyoqma()->omaeiiwasuqkeeak($oquqsamoqkequssa->myywwqkyiwawwquy($oquqsamoqkequssa::cmiegiycgiucucgs))->omaeiiwasuqkeeak($oquqsamoqkequssa->myywwqkyiwawwquy($oquqsamoqkequssa::mwisuqgywiccyykw))->omaeiiwasuqkeeak($oquqsamoqkequssa->myywwqkyiwawwquy($ceiwsaacewygcsqg))->omaeiiwasuqkeeak('posts.ID as post_id')->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->owackeyiuiikegqg(Constants::kqigmeickowqiiyy, 'ID')->aqkyoweegqwuwsgw(Constants::qgmuskygocwmouos)->gmaouawykqgywcme())->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim(Constants::uouymeyqasaeckso, $this->maykkqauyaoqmqeu())->gouskoeouiqwokqs()->aqkyoweegqwuwsgw(Constants::qgmuskygocwmouos))->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim(Constants::gikuasuikwemyqoq, Constants::iuemaweiggauysws)->aqkyoweegqwuwsgw(Constants::qgmuskygocwmouos)->maqiysyuqmwcqoig('!='))->mmiqqgoaeccgwoqs($eqwoegegiamegqsm->megqywqeuquawkim()->pmouaioykaoceyag($eqwoegegiamegqsm->megqywqeuquawkim($ceiwsaacewygcsqg)->wegeyaguowmkqiac()->iygikqkegwkaaess())->pmouaioykaoceyag($eqwoegegiamegqsm->megqywqeuquawkim($oquqsamoqkequssa::mwisuqgywiccyykw)->wegeyaguowmkqiac()->iygikqkegwkaaess())->pmouaioykaoceyag($eqwoegegiamegqsm->megqywqeuquawkim($oquqsamoqkequssa::cmiegiycgiucucgs)->wegeyaguowmkqiac()->iygikqkegwkaaess())); $sogksuscggsicmac = $oquqsamoqkequssa->iekyeyicoyyawomk()->aeggeuqycwawueqy($oquqsamoqkequssa->iekyeyicoyyawomk()->kqewyqqqiyiouaou($gqgemcmoicmgaqie), [Constants::imywcsggckkcywgk => $suaemuyiacqyugsm, Constants::ausqeuugegoygouq => 20]); if ($sogksuscggsicmac) { $oammesyieqmwuwyi = $sogksuscggsicmac[Constants::qwumqqyuasyskkkc]; foreach ($oammesyieqmwuwyi as $igqsaukqcqscimok) { $this->seoeawgkwacqcqak($oquqsamoqkequssa->waecsyqmwascmqoa($igqsaukqcqscimok, Constants::kqigmeickowqiiyy, 0)); } if (!$this->caokeucsksukesyo()->asgqmkcukouykiie()->iyiccksyewqymmqg($sogksuscggsicmac, $suaemuyiacqyugsm)) { Process::symcgieuakksimmu()->uamuwgiguyaysyem($suaemuyiacqyugsm + 1); } } } public function ukqieeemykgisiic($gcqseksiskwueksc) { if ($gcqseksiskwueksc > 0) { $oquqsamoqkequssa = PostOwner::symcgieuakksimmu(); $woewcmgaacwwcmyy = $oquqsamoqkequssa->iekyeyicoyyawomk()->akkkoiiymmamsauc($gcqseksiskwueksc, Constants::kqigmeickowqiiyy); if ($woewcmgaacwwcmyy) { $oquqsamoqkequssa->gssiscqyqsacmeca()->sgcuwcowgwimgsgk($woewcmgaacwwcmyy); } } } public function seoeawgkwacqcqak($gcqseksiskwueksc) { if ($gcqseksiskwueksc > 0) { $seumokooiykcomco = $this->caokeucsksukesyo()->ayueggmoqeeukqmq(); if (Constants::iuemaweiggauysws === $seumokooiykcomco->ucwmcwqmqwaymkkc($gcqseksiskwueksc) || $this->caokeucsksukesyo()->owicscwgeuqcqaig()->somkqoqeimmeemuq() || !in_array($seumokooiykcomco->gueasuouwqysmomu($gcqseksiskwueksc), $this->maykkqauyaoqmqeu(), true)) { return; } $oquqsamoqkequssa = PostOwner::symcgieuakksimmu(); $woewcmgaacwwcmyy = $oquqsamoqkequssa->iekyeyicoyyawomk()->akkkoiiymmamsauc($gcqseksiskwueksc, Constants::kqigmeickowqiiyy); $kueeocmceokoouqa = Request::symcgieuakksimmu(); $qaqgaqikqmcmukem = $seumokooiykcomco->mguqscccckuywsya($gcqseksiskwueksc, ''); $eqwoegegiamegqsm = $this->caokeucsksukesyo()->skckwsgymkimyuwo(); $aqmwamyiwgeeymqa = $kueeocmceokoouqa->iekyeyicoyyawomk()->oqomcmyuuakigusk([$eqwoegegiamegqsm->megqywqeuquawkim(Constants::meksegaoamowuwoq, $qaqgaqikqmcmukem), $eqwoegegiamegqsm->megqywqeuquawkim(Salary::mwisuqgywiccyykw)->amwwousckkqyweok(), $eqwoegegiamegqsm->megqywqeuquawkim(Salary::mwisuqgywiccyykw, '0')->maqiysyuqmwcqoig('>')]); if (empty($aqmwamyiwgeeymqa)) { if ($this->uwkmaywceaaaigwo()->issssuygyewuaswa()->scmcyesmmikkucie(Constants::gewmeskawiqikkoc)) { $this->caokeucsksukesyo()->kwoycoqogoswycgg()->oiugciyawoeieace($this, "can not find request for {$qaqgaqikqmcmukem}", 'post-owner'); } return; } $wgkogsmkwskskgsw = $kueeocmceokoouqa->waecsyqmwascmqoa($aqmwamyiwgeeymqa, Salary::mwisuqgywiccyykw); $ousomaowqseoamse = $kueeocmceokoouqa->mwyqswsaeeewsosm($aqmwamyiwgeeymqa); if (empty($wgkogsmkwskskgsw) && empty($ousomaowqseoamse)) { return; } if (empty($woewcmgaacwwcmyy)) { $icwicymcioeyeyek = [Constants::kqigmeickowqiiyy => $gcqseksiskwueksc]; $icwicymcioeyeyek[Salary::mwisuqgywiccyykw] = $wgkogsmkwskskgsw; $icwicymcioeyeyek[$oquqsamoqkequssa::cmiegiycgiucucgs] = $ousomaowqseoamse; $oquqsamoqkequssa->gssiscqyqsacmeca()->gsegsiocqmsoayii($icwicymcioeyeyek); } else { $suckquwcuiuyiogc = false; $ooyigaeguummmyiw = (array) $woewcmgaacwwcmyy; $umwkocissaekoogg = (int) $oquqsamoqkequssa->waecsyqmwascmqoa($woewcmgaacwwcmyy, $oquqsamoqkequssa::mwisuqgywiccyykw); if (empty($umwkocissaekoogg) || $umwkocissaekoogg !== $wgkogsmkwskskgsw) { $ooyigaeguummmyiw[$oquqsamoqkequssa::mwisuqgywiccyykw] = $wgkogsmkwskskgsw; $suckquwcuiuyiogc = true; } $easwmoyqimwuicwe = (int) $oquqsamoqkequssa->waecsyqmwascmqoa($woewcmgaacwwcmyy, $oquqsamoqkequssa::cmiegiycgiucucgs); if (empty($easwmoyqimwuicwe) || $easwmoyqimwuicwe !== $ousomaowqseoamse) { $ooyigaeguummmyiw[$oquqsamoqkequssa::cmiegiycgiucucgs] = $ousomaowqseoamse; $suckquwcuiuyiogc = true; } if ($suckquwcuiuyiogc) { $oquqsamoqkequssa->gssiscqyqsacmeca()->gsegsiocqmsoayii($ooyigaeguummmyiw); } } } } private function gmsmqaoagciuigss($gqgemcmoicmgaqie) : bool { $eqwoegegiamegqsm = $this->caokeucsksukesyo()->skckwsgymkimyuwo(); $iquqgwyoicagyice = $eqwoegegiamegqsm->get(Constants::uouymeyqasaeckso, [], $gqgemcmoicmgaqie); if ($gqgemcmoicmgaqie instanceof WP_Query) { $qaqgaqikqmcmukem = $eqwoegegiamegqsm->get(Constants::iwascisiiokuackw, 0, $gqgemcmoicmgaqie); if ($gqgemcmoicmgaqie->is_admin) { if (empty($qaqgaqikqmcmukem) && !$this->uwkmaywceaaaigwo()->issssuygyewuaswa()->scmcyesmmikkucie(Constants::gewmeskawiqikkoc)) { return in_array($iquqgwyoicagyice, $this->maykkqauyaoqmqeu(), true); } } else { $wgkogsmkwskskgsw = $eqwoegegiamegqsm->get(Salary::mwisuqgywiccyykw, 0, $gqgemcmoicmgaqie); return !empty($qaqgaqikqmcmukem) || !empty($wgkogsmkwskskgsw); } } return false; } public function maykkqauyaoqmqeu(array $yemgmmgogcwccuky = []) : array { $sciomagaqmgggsiu = ['news', Constants::mswoacegomcucaik, Constants::oguseymmyyoyaako, Constants::sususqikkuaoqeco, Constants::cqycgsyykemiygou]; if ($yemgmmgogcwccuky) { } return $sciomagaqmgggsiu; } }
